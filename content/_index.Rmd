---
title: "Home"
output:
    blogdown::html_page:
      css: "/css/my_style.css"
---

```{r setup, echo=FALSE, warning=FALSE, error=FALSE, message=FALSE}
library(tidyverse)
library(DT)
# library(gt)

tbl_update_date <- "2020-06-02"

tie_overalldiff_calc <- function(shaping_diff, no_ties, no_steps, fold_in_half, no_loops, end_tied) {
  
  no_ties_mult <- ifelse(no_ties == 1, 1, 1.2) 
  
  fold_in_half_mult <- ifelse(fold_in_half == "N", 1, 1.3) 
   
  end_tied_mult <- ifelse(end_tied == "both", 1.5, 1) 
  
  if(no_steps < 4) {
    no_steps_mult <- 1
  } else if(no_steps < 7) {
    no_steps_mult <- 1.3
  } else {
    no_steps_mult <- 1.5
  }
  
  no_loops_mult_tbl <- tibble::tribble(~no_loops,  ~mult,
                                   0,          1,
                                   1,          1.1,
                                   2,          1.2,
                                   3,          1.3,
                                   4,          1.5,
                                   5,          1.6,
                                   6,          1.7,
                                   7,          1.8,
                                   8,          1.9,
                                   9,          2.0,
                                   10,         2.1)
  
 no_loops_mult <- no_loops %>% 
   enframe(name = NULL, value = "no_loops") %>% 
   left_join(no_loops_mult_tbl, by = "no_loops") %>% 
   pull(mult)
 
 if(shaping_diff == 1) {
    base <- 1
  } else if(shaping_diff == 2) {
    base <- 1.5
  } else if(shaping_diff == 3) {
    base <- 2
  } else if(shaping_diff == 4) {
    base <- 2.8
  } else {
    base <- 3.2
  }

  overall_diff <- base * no_ties_mult * fold_in_half_mult * end_tied_mult  * no_steps_mult  * no_loops_mult
  
}

ties_data <- tibble::tribble(~name,              ~no_ties, ~no_steps,  ~fold_in_half, ~end_tied_with, ~url,                                              ~shaping_difficulty,       ~no_loop_thrus,
                             "double_eldredge",  2,        6,          "N",           "little", "https://www.youtube.com/watch?v=jLYWJX4779A",     3,                         3,  
                             "double_trinity",   1,        6,          "N",           "little", "https://www.youtube.com/watch?v=6-0FdqYjv6s",     1,                         6,
                             "eldredge",         1,        6,          "N",           "little", "https://www.youtube.com/watch?v=FXyWSAmwVZ4",     1,                         0,
                             "eldredge2",        1,        6,          "N",           "little", "https://www.youtube.com/watch?v=FukqiewJuPw",     2,                         2,
                             "trinity_eldredge", 1,        5,          "N",           "little", "https://www.youtube.com/watch?v=Ls_MgWrTVrk",     1,                         2,
                             "trinity",          1,        4,          "N",           "little", "https://www.youtube.com/watch?v=IX_GixAhXeY",     2,                         2,
                             "rosebud1",         1,        6,          "Y",           "little",       "https://www.youtube.com/watch?v=s-S1WSFTpuU",     2,                         1,
                             "rosebud2",         1,        4,          "N",           "little",       "https://www.youtube.com/watch?v=-diYX2FH_AE",     2,                         0,
                             "vidalia",          1,        5,          "N",           "little", "https://www.youtube.com/watch?v=ENYCWzrB9d8",     2,                         3,
                             "valentine",        1,        5,          "Y",           "little", "https://www.youtube.com/watch?v=XwvNQYIZnSI",     3,                         1,
                             "sweetheart",       1,        4,          "Y",           "little", "https://www.youtube.com/watch?v=nfoqEexLghI",     4,                         3,
                             "romance",          1,        5,          "Y",           "little", "https://www.youtube.com/watch?v=XdRsQ3KuTqM",     3,                         5,
                             "cupid",            1,        3,          "N",           "both", "https://www.youtube.com/watch?v=VWfEccMG_HI",     5,                         1,
                             "vampire",          1,        5,          "Y",           "little", "https://www.youtube.com/watch?v=wFTkThHwagI",     1,                         0,
                             "embrace",          1,        3,          "Y",           "little", "https://www.youtube.com/watch?v=mwfLpoyqeKE",     1,                         3,
                             "deivao_twist",     1,        6,          "N",           "little", "https://www.youtube.com/watch?v=mCANkZKtES4",     1,                         3)  %>% 
  mutate(img_id = row_number(),
         close_id = img_id - 1,
         image = paste0('<img id="myImg', img_id, '" src="/img/', name, '.jpg"> <div id="myModal', img_id, '" class="modal"> <span class="close">&times;</span> <img class="modal-content" id="img', img_id,'"> <div id="caption"></div>
</div> <script>
// Get the modal
var modal = document.getElementById("myModal', img_id, '");

// Get the image and insert it inside the modal
var img = document.getElementById("myImg', img_id,'");
var modalImg = document.getElementById("img', img_id, '");
var captionText = document.getElementById("caption");
img.onclick = function(){
  modal.style.display = "block";
  modalImg.src = this.src;
}
// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[', close_id, '];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}
</script>'),
         name = paste0("<a href='", url, "'target='_blank'>", name, "</a>")
         ) %>% 
  select(-url, -img_id, -close_id) %>% 
  mutate(overall_difficulty = pmap(list(shaping_difficulty, no_ties, no_steps, fold_in_half, no_loop_thrus, end_tied_with), tie_overalldiff_calc)) %>% 
  unnest(overall_difficulty) %>% 
  mutate(overall_difficulty = round(10 * overall_difficulty/max(overall_difficulty), digits = 2)) %>% 
  select(name, overall_difficulty, no_ties, no_steps, shaping_difficulty, no_loop_thrus, image)


```




# Ben Gin's Blog
This is a blog of things that I like to do/make including:

* Learning new tie knots
* Building pallet furniture
* Making craft projects

Most of the pallet and craft posts will be retrospective, as they are completed projects from past years.

## Pallet Furniture
In 2011 I helped a colleague make a mobile pallet kitchen table, and so found out that I could obtain pallets from my work place. Since then, I have obtained pallets from wherever I could find them (but no longer from work). I disassemble them and store the wood ready for any projects. To disassemble pallets, I use the [no tools method](https://www.youtube.com/watch?v=cLwKUeez1OE) first. If the configuration of the wood does not allow for this technique, I then resort to a crow bar and rubber mallet.

## Craft Projects
I also like to try my hand at any other craft projects.

## Tie Summary
I stumbled across a video on youtube showing two different ways of tying tie knots, and that led me to the discovery that there are 100+ ways to tie a tie. Starting from a work initiative to "suit up Tuesday" (March 2020), I decided to make it mean "Tie Tuesday", and so have been doing one new tie knot a week.

Below is a summary table of the tie knots that I have tried. The"Name" column contains a hyperlink to the youtube video for that knot, and the "Image" column contains the image which can be enlarged by clicking on the image. The "Difficulty" column is calculated (to be documented in a future post and calculation may be adjusted) and the numbers are relative with a maximum of 10 for what I consider the most difficult tie knot.

Table updated: `r tbl_update_date`

```{r, echo=FALSE}
ties_data %>%
  datatable(escape = FALSE, options = list(dom = 't', ordering = FALSE, autowidth = TRUE, pageLength = nrow(ties_data)), rownames = FALSE, colnames = c('Name', 'Difficulty', 'No. ties', 'No. steps', 'Shaping difficulty', 'No. loop thrus', 'Image'))

# ties_data %>%
#   gt() %>%
#   cols_label(
#     name = "Name",
#     no_ties = "No. ties",
#     no_steps = "No. steps",
#     fold_in_half = "fold in half",
#     end_tied_with = "End",
#     shaping_difficulty = "Shaping difficulty",
#     no_loop_thrus = "No. loop thrus",
#     image = "Image"
  # ) #%>% 
  # fmt(
  #   columns = vars(name, image),
  #   fns = function(x) {
  #     html(x)
  #   }
  # ) #%>%
  # text_transform(
  #   locations = cells_body(
  #     columns = vars(name, image)
  #   ),
  #   fn = function(x) {
  #     html(x)
  #   }
  # )


```



## Posts
